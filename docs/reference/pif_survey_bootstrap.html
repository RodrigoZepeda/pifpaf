<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Potential Impact Fraction via bootstrap for survey data — pif_survey_bootstrap • pifpaf</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Potential Impact Fraction via bootstrap for survey data — pif_survey_bootstrap"><meta property="og:description" content="Estimates the potential impact fraction, pif, for
individual-level exposure data (and covariates), X, from a
cross-sectional survey. Exposure is assumed to be associated with
a relative risk function, rr, with parameter theta. A counterfactual
scenario as a function of the exposure cft is assumed.
The potential impact fraction is defined Chan et al. (2023)
:


\[
 \text{PIF} = \dfrac{\mathbb{E}\Big[RR(X;\theta)\Big] -
   \mathbb{E}\Big[RR\big(\text{cft}(X);\theta\big)\Big]}{\mathbb{E}\Big[RR(X;\theta)\Big]}
\]
where:
\(X\) denotes the individual-level matrix of exposure and covariates,
\(\theta\) represents additional parameters of the relative risk function,
\(RR(X,\theta)\) denotes the relative risk of exposure (and covariates) at level
\(X\) given parameters \(\theta\),
\(cft(X)\) denotes the counterfactual function applied to exposure and covariates,
\({\mathbb{E}\Big[RR(X;\theta)\Big]}\) and
\({\mathbb{E}\Big[RR(\text{cft}(X);\theta)\Big]}\) denote the population average relative
risk under current (observed) conditions and the relative risk under the counterfactual scenario.
\(\text{PIF}\) represents the potential impact fraction.

"><meta property="og:image" content="/logo.svg"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">pifpaf</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Potential Impact Fraction via bootstrap for survey data</h1>
    
    <div class="hidden name"><code>pif_survey_bootstrap.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Estimates the <strong>potential impact fraction</strong>, <code>pif</code>, for
<strong>individual-level exposure</strong> data (and covariates), <code>X</code>, from a
cross-sectional survey. Exposure is assumed to be associated with
a <strong>relative risk</strong> function, <code>rr</code>, with parameter <code>theta</code>. A <strong>counterfactual</strong>
scenario as a function of the exposure <code>cft</code> is assumed.</p>
<p>The <strong>potential impact fraction</strong> is defined Chan et al. (2023)
:
<script id="MathJax-script" async src="../../mathjaxr/doc/mathjax/es5/tex-chtml-full.js"></script>

\[
 \text{PIF} = \dfrac{\mathbb{E}\Big[RR(X;\theta)\Big] -
   \mathbb{E}\Big[RR\big(\text{cft}(X);\theta\big)\Big]}{\mathbb{E}\Big[RR(X;\theta)\Big]}
\]</p>
<p>where:</p><ul><li><p><em></em>\(X\) denotes the individual-level matrix of exposure and covariates,</p></li>
<li><p><em></em>\(\theta\) represents additional parameters of the relative risk function,</p></li>
<li><p><em></em>\(RR(X,\theta)\) denotes the relative risk of exposure (and covariates) at level
<em></em>\(X\) given parameters <em></em>\(\theta\),</p></li>
<li><p><em></em>\(cft(X)\) denotes the counterfactual function applied to exposure and covariates,</p></li>
<li><p><em></em>\({\mathbb{E}\Big[RR(X;\theta)\Big]}\) and
<em></em>\({\mathbb{E}\Big[RR(\text{cft}(X);\theta)\Big]}\) denote the population average relative
risk under current (observed) conditions and the relative risk under the counterfactual scenario.</p></li>
<li><p><em></em>\(\text{PIF}\) represents the potential impact fraction.</p></li>
</ul></div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">pif_survey_bootstrap</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>design</dt>
<dd><p>(<code>survey.design</code>/<code>svyrep.design</code>) survey design structure from
the survey package obtained from <code><a href="https://rdrr.io/pkg/survey/man/svydesign.html" class="external-link">survey::svydesign()</a></code> or a survey replicates design
obtained either from <code><a href="https://rdrr.io/pkg/survey/man/svrepdesign.html" class="external-link">survey::svrepdesign()</a></code> or <code><a href="https://bschneidr.github.io/svrep/reference/as_bootstrap_design.html" class="external-link">svrep::as_bootstrap_design()</a></code>. Contains
individual level exposure and covariates.</p></dd>


<dt>theta</dt>
<dd><p>(<code>vector</code>/<code>double</code>) parameters of the relative risk function <code>rr</code>.</p></dd>


<dt>rr</dt>
<dd><p>(<code>function</code>) relative risk function with two parameters: <code>X</code> and <code>theta</code> (in that order).</p></dd>


<dt>cft</dt>
<dd><p>(<code>function</code>) counterfactual function with one parameter: <code>X</code>.</p></dd>


<dt>n_samples</dt>
<dd><p>(<code>double</code>) number of bootstrap samples</p></dd>


<dt>additional_theta_arguments</dt>
<dd><p>any additional information on <code>theta</code> utilized
for obtaining bootstrap samples from the paramter. Options are:</p><ul><li><p>(<code>double</code>) the <strong>variance</strong> of <code>theta</code> if <code>theta</code> is
one dimensional and asymptotical normality is assumed (default).</p></li>
<li><p>(<code>vector</code>) the <strong>variances</strong> of each entry of <code>theta</code> if <code>theta</code> is
n-dimensional and its entries are uncorrelated and asymptotical normality is assumed (default).</p></li>
<li><p>(<code>matrix</code>) the <strong>variance-covariance</strong> matrix of <code>theta</code> if <code>theta</code> is
n-dimensional and its entries are correlated and asymptotical normality is assumed (default).</p></li>
<li><p>any argument to pass to <code>theta_distribution</code> to simulate samples from <code>theta</code>
if <code>theta</code> is not assumed to be asymptotically normally distributed.</p></li>
</ul><p><strong>Optional</strong></p></dd>


<dt>theta_distribution</dt>
<dd><p>(<code>function</code>) random number generator that follows
the distribution of the estimator <code>theta</code>. By default, <code>theta</code> is assumed to be asymptotically
normal and thus <code>theta_distribution</code> is set to <code><a href="https://rdrr.io/pkg/mvtnorm/man/Mvnorm.html" class="external-link">mvtnorm::rmvnorm()</a></code> with
variance given by <code>additional_theta_arguments</code>.</p></dd>


<dt>uncertainty_interval_type</dt>
<dd><p>(<code>string</code>) either <code>'wald'</code> (recommended) or <code>'percentile'</code> for
uncertainty intervals based upon the bootstrap's percentile or the Wald-type approximation
(see confidence interval section)</p></dd>


<dt>parallel</dt>
<dd><p>(<code>boolean</code>) Flag indicating whether or not to do computations in parallel.
Default is <code>TRUE</code>.</p></dd>


<dt>num_cores</dt>
<dd><p>(<code>int</code>) Number of cores; defaults to <code><a href="https://rdrr.io/r/parallel/detectCores.html" class="external-link">parallel::detectCores()</a></code>.</p></dd>


<dt>confidence_level</dt>
<dd><p>(<code>double</code>) Confidence level for the uncertainty interval.
Defaults to <code>0.95</code></p></dd>

</dl></div>
    <div id="confidence-intervals">
    <h2>Confidence Intervals</h2>
    


<p>Confidence intervals are estimated via the two methods specified
by Arnab (2017)
.</p><ol><li><p><strong>Wald-type confidence intervals</strong> (which are more precise) are of the form:
\[
\widehat{\text{PIF}} \pm t_{1 - \alpha/2}
\sqrt{\widehat{\text{Var}}_{\text{B}}\big[\widehat{\text{PIF}}\big]}
\]
where <em></em>\(t_{1 - \alpha/2}\) stands for the percent points at level <em></em>\(1 - \alpha/2\)
of Student's t-distribution, and
<em></em>\(\widehat{\text{Var}}_{\text{B}}\big[\widehat{\text{PIF}}\big]\)
represents the estimated variance (via bootstrap) of the potential impact fraction estimator.</p></li>
<li><p><strong>Percentile confidence intervals</strong> (less precise) are of the form:
\[
\Big[\widehat{\text{PIF}}_{\text{B},\alpha/2}, \widehat{\text{PIF}}_{\text{B},1-\alpha/2}\Big]
\]
where <em></em>\(\widehat{\text{PIF}}_{\text{B},k}\) represents the kth sample quantile
from the bootstrap simulation of the potential impact fraction estimator.</p></li>
</ol></div>
    <div id="references">
    <h2>References</h2>
    <p>Arnab R (2017).
“Survey sampling theory and applications.”
In chapter Variance Estimation: Complex Survey Designs.
Academic Press.<br><br> Chan CE, Zepeda-Tello R, Camacho-García-Formentí D, Cudhea F, Meza R, Rodrigues E, Spiegelman D, Barrientos-Gutierrez T, Zhou X (2023).
“Nonparametric Estimation of the Potential Impact Fraction and Population Attributable Fraction with Individual-Level and Aggregated Data.”
2207.03597.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code>paf()</code>, <code><a href="pif.html">pif()</a></code>, <code>pif_approximate()</code>, <code>pif_delta_method()</code>.</p></div>
    </div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Rodrigo Zepeda-Tello.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

